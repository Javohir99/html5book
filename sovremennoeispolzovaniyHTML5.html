<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>
            Современное использование HTML5
        </title>
    </head>
    <body>
        <h2>Современное использование HTML5</h2>
        <p>Как можно видеть, стандарт HTML5 поддерживает всевозможные странные методы. В то же самое время он возрождает (и стандартизует) некоторые старые либеральные правила HTML и вводит передовые возможности, которые работают только в новейших браузерах.</p>
        <p>Что касается браузерной совместимости, функциональные возможности HTML5 можно разбить на три категории.</p>
        <ul>
            <li>Возможности, которые уже работают. К этой категории принадлежит возможности, которые высокий уровень поддержки, но официально не были частью стандарта HTML в прошлом (например, метод drag and drop). В нее также входят возможности, которые можно реализовать для старых браузеров, приложив очень небольшие дополнительные усилия, наподобие семантических элементов.</li>
            <li>Возможности с поэтапной деградаций. Напрмер, если у старого браузера имеются проблемы с использованием нового элемента &lt;video&gt;, это элемент позволит вам предоставить браузеру какое-либо другое средство проигрывания, например плеер, использующий подключаемый модуль Flash. Это намного лучше, чем сообщение об ошибке, которое определенно нельзя назвать поэтапной деградаций. В эту категорию также входят второстепенные возможности из разряда примочек, на которые старые браузеры могут спокойно не обращать внимания, наподобие некоторых старых возможностей для работы с веб-формами (например, замещающий текст), и некоторые возможности форматирования из CSS3 (например, для скругления углов или отбрасывания теней).</li>
            <li>Возможности, требующие обходных решений JavaScript. Мотиваций для многих новых возможностей HTML5 послужили рабработки, которые веб-программисты уже делали другим, более трудоемким, способом. Поэтому не стоит удивляться, что много из возможностей HTML 5 можно дубоировать с помощью хорошей библиотеки JavaScript (или, в худшем случае, написав энное количество строк кода собственного специализированного сценария JavaScript). Создание обходного решения, JavaScript может быть очень трудоемкой задачей, поэтому, если вы посчитаете, что определенная возможность является необходимой и требует обходного решения JavaScript, вы можете просто решить использовать это обходное решение для всех страниц и отложить использование методов HTML5 на будущее.</li>           
        </ul>
        <p>В этой книне предполагается, что предпочтения будет отданы подходу с использованием методов HTML5 в случаях, когда это абсолютно безопасно. Это будет методы из первой категории вышеизложенного списка. Если возможность принадлежит одной из двух других категорий (что бывает достаточно часто), то вам нужно решить, стоит ли погружаться в разработку решения, работающего в  старых браузерах, или же будет предпочтительней подождать и подготовиться к лучшей ситуации в будещем. Если в Паутине есть хорошее обходное решение на JavaScript, то оно будет указанно в этой книге. Но во многих случаях вам придется делать выбор мужду замысловатой новой возможностью и универсальным доступом.</p>
        <h3>Поддерживает ли браузер вашу разметку?</h3>
        <p>Последнее слово в вопросе, в каком объеме использовать HTML5, принадлежит разработчикам браузеров. Если браузер не поддерживает какую-либо возможнсоть, нет никакого смысла использовать ее, нестмотря на все, что говорится в стандарте. В настоящее время существуют четыре или пять основных браузеров (не считая браузеров для мобильных устройств с возможностью подключения к Интернету, таких как смартфоны и планшеты IPad). У разработчика-одиночки нет никаких шансов протестировать каждую потенциальную возможность на каждом браузере, не говоря уже о возможности оценить поддержку ее в старых версиях браузеров, которые широко используются до сих пор.</p>
        <p>К счастью, существует веб-сайт http://caniuse.com, который может помочь вам справиться с этой задачей. В нем даются подробности поддержки HTML5 во всех основных браузерах. И, самое приятное, он позволит вам выделить именно те возможности, которые вам требуются. Веб-сайт работает следующим образом:</p>
        <ol>
            <li>Сначала выберите вкладку Tables, а потом вкладку Compatibility tables и выберите на ней требуемую вам возможность (или группу возможностей), установив соответствующий флажки. Можно выполнить поиск конкретной возможности, введя ее название в поле Search, расположенное по центру вверх страниц. Или же можно просмотреть целью категорию возможностей, установив соответствующий флажок в разделе Caterogy слева на странице. (В таком случае будет выведена таблица совместимости для каждой вложенной возможности.) Например, чтобы проверить только возможности, которые считаются частью стандарта HTML5, сбросьте все флажки и устоновите только флажок HTML5. Чтобы проверить совместимость возможностей на основе JavaScript, которые сначала входил в HTML5, но потом были выделены в отдельную категорию, устоновите флажок JS API. А для проверки поддержки новых искусных возможностей CSS3 установите флажок CSS.</li>
            <li>При желании, выберите другие опции, установив соответствующие флажки. Можно уточнить результаты поиска, удалив некоторые подробности с браузерами для мобильных устройств или с браузерми, которые находятся в стадии разработки и не были официально выпущены. Но обычно не стоит отказываться от этих подробностей, т.к. таблицы легко понимать даже с ними.</li>
            <li>Прокрутите страницу вниз, чтобы просмотреть все резуальтаты. Для большого количества возможностей одновременно выводится только 20 таблиц резульататов. Для просмотра следующих 20 таблиц результатов следует щелкнуть по ссылке  Show next 20 вниз страницы. В таблице для каждок возможности в загловках столбцов указаны браузеры, а в заголовках строк - их характеристики версий. Определенная версия браузера находится на пересечении соответствующего столбца и строки. Если возможность поддерживается данной версией браузера, соответсвующая ячейка закрашенна светло-зеленым цветом; частичная поддержка обозначается темнозеленым, а отсутствие поддержки - розовым. Если неизвестно, поддерживается ли данная возможность, в ячейке не указывается номер версии браузера, а сама ячейка окрашена коричневым цветом.</li>
        </ol>
        <h3>Статистика популярности браузеров</h3>
        <p>Последним важным пунктом проблемы поддержки возможностей браузерами является статистика популярности конкретных браузеров. Иными словами, информация о том, сколько посетителей Паутины пользуется браузером, поддерживающим возможности, которые вы намереваетесь использовать в своей разметке. Одним из хороших источников этой информации является популярный сайт GlogalStats (http://gs.statcounter.com). На странице сайта в раскрывающемся списке Statistic выберите вариант Browser. А вариант Browser Vertsion позволит просмотреть популярность не только конкретного браузера, но и каждой из его версий. Результаты можно сузить, выбрав конкретный регион или страну в расрывающеися списке Country/Region.</p>
        <h4>На ПРОФЕССИОНАЛЬНОМ УРОВНЕ Internet Explorer утрачивает популярность?</h4>
        <p>В процессе изучения HTML5 вы быстро обнаружите, что один браузер выделяется на фоне всех остальных своим низким уровнем поддержки HTML5 (а также самой медленной скоростью выхода обновлений). Этим плетущимся в хвосте браузером является Internet Explorer. Хотя выпуском IE 9 корпорация Microsoft сделал громадный шаг в правильном направлении, уровень поддержки HTML 5  в IE все еще ниже, чем в любом другом современоом браузере.</p>
        <p>Не то чтобы Microsoft не обращает внимания на последние разработки в области HTML5, но она удерживается от реализации возможностей, которые еще не завершегы. Для некоторых из этих возможностей Microsoft предоставляет эксперементальные расширения к IE (называющиеся "лабораториями" HTML5), которые можно загрузить с сайта http://html5labs.interoperabilitybridges.com/. Все это хорошо, что если вы просто хотите немного проиграть с некоторым новыми возможностями HTML5, которые все еще находятся в процессе разработки. Но если вы хотите реалиховать эти возможности в настоящем веб-приложении, то помощи от этого мало. (Конечно же, реализация некоторых из этих возможностей граничит с безрассудством, но это уже совершенно другой вопрос.)</p>
        <p>Более того, с поддержкой HTML5 в IT имеестся еще более важная проблема. Как уже упоминалось, IE9 является первой версией IE, поддерживающей возможности HTML5. Но IE 9 устанавливается только под Windows 7 или Vista. Пользователи с Windows XP (которая, несмотря на свой почтенный возраст, на момент написания этой книги была самой популярной операционной системой в мире и по всему признакам бедет широко использоваться еще долгое время, даже после того, как это место займет Windows 7), не могут установить IE 9 и, соответсвенно, не могут получить никакой поддержки для HTML5. И хотя эти оставленные на произвол судьбы компанией Microsoft компьютеры не полностью потеряны - на них можно установить какой-либо другой браузер - пройдет очень много времени, прежде чем веб-разработчики смогут перейти на HTML5, не боспокоясь об обнаружении возможностей и разервных решениях.</p>
        <p>Наконец, с помощью переключателей справа от области вывода результатов можно выбрать способ отображения рузультатов. Столбиковая диаграмма отображает популярность браузеров в настоящее время. Для ее вывода отметьте переключатель Bar. А линейный график показывает тенденции в выборе браузера в теченее определенного периода времени. Этот режим устанавливаются переключателем Line. По умолчанию в режиме линейного графика отображаются  результаты за целый год, начиная от текущего месяца. Но период времени можно настроить, выбрав соответсвующее значение в поле Time Period.</p>
        <p>Сайт GlogalStats собирает статистические данные ежедневно с помощью кода слежения, который установлен на миллионах веб-сайтов. Но в то время как эти статистические данные представляют огромное количество страниц и громадный объем данных, все равно это лищь малая часть всей Паутины. Это означает, что нельзя непременно полагать, что посетители вашего веб-сайта будут пользоваться таким же браузерами.</p>
        <p>Более того, браузерные предпочтения могут быть разными в зависимости от страны пользователя и типа веб-сайта. Например, в Германии наиболее популярным браузером является FireFox, которому отдают предпочтение 60% пользователей веб, а в Белоруссмм это Opera 49% доли пользователей Интернета. А на веб-сайт TechCrunch (популярный новостной сайт для компьютерных фанатов) всего лишь 16% посетителей заходят с помощью самого популярного в мире браузера, Internet Explorer. Поэтому, если вы хотите разработать веб-сайт для пользоваетелей своего круга, изучите статистические данные для страниц своего веб-сайта. (Если вы еще не пользуетесь услугами сбора статистических данных для своего сайта, вас может заинтересовать совершенно бесплатная услуга высокого уровня Google Analytics. см. www.google.com/analytics.)</p>
        <h3>Определение возможностей с помощью Modernizr</h3>
        <p>В течение нескольких следующих лет абсолютно реальным будет то обстоятльство, что некоторые посетители вашего веб-сайта будут пользоваться браузерами, не поддерживающими HTML5. Но это не должно остановить вас от использования возможностей этого стандарта при условии, что вы согласны вложить немного усилий в разработку обходных решений или возможности поэтапной деградации. В любом случае вам, скорее всего, потребуется некоторая помощь JavaScript. Обычно это делается таким образом: после загрзки вашей страницы браузером запускается специальный сценарий, который проверяет, поддерживает ли браузер опрделенную возможность.</p>
        <p>К сожелению, т.к. в своей основе HTML5 является набором связанных стандартов, одного общего теста на поддержку возможностей не существует. Вместо это требуется выполнить несколько десятков разных тестов, чтобы проверить наличие поддежки различных возможностей, при этом иногда даже требуется проверять, поддерживается ли определенная часть возможности, что очень быстро делает задачу тестирования весьма неприятной.</p>
        <p>При проверке поддержки некоторой функциональности браузером обычно требуется найти возможность в программном объекте или создать объект и использовать его определенным образом. Но подумайте хорошенько, прежде чем приступать к написанию кода тестирования такого типа, т.к. с этой задачей очень легко наломать дров. Например, код для проверки поддержки возможности браузерами может не работать на некоторых браузерах по той или иной непонятной причине или быстро устареть. Вместо этого подумайте о применении компактного, постоянно обновяемого инструмента Modernizr (www.modernizr.com), который проверяет поддержку браузерами широкого диапазона возможностей HTML5 и связанных возможностей. Он также предоставляет классный метод для реализации поддержки разервных решений при использовании новых возможностей CSS3</p>
        <p>Проверка веб-страниц с помощью Modernizr выполняется так:</p>
        <ol>
            <li>Загрузите JavaScript-файл для Modernizr. Для этого в области Download Modernizr в верхней центральной части страницы нажмите кнопку Development. Обычно, имя этого файла будет похоже на modernizr-2.0.6.js. Точнее имя зависит от используемой версии. Некоторые разработчики переименовывают этот файл, убирая номер версии, например modernizr.js. Это позволяет обновить файл Modernizr в будущем, не требуя поиска и корректировки ссылок на него в веб-страницах, в которых он используется.</li>
            <li>Скопируйте файл сценария в папку, в которой находится веб-страница, требующая тестирования. Либо файл сценария можно поместить в подкаталог и подкорректировать должным образом путь к ней в ссылке JavaScript</li>
            <li>В блоке &lt;head&gt; тестируемой веб-страницы вставьте ссылку на файл сценария Modernizr. В следующем листинге показан пример вставки этой ссылки:
            <i>&lt;head&gt;<br>
                &lt;meta charset="utf-8"&gt;<br>
                &lt;script src="modernizr-2.0.6.js"&gt;&lt;/script&gt;<br>
                .... <br>
                &lt;/head&gt;
            </i>
            <p>Теперь, всякий раз при загрузке этой страницы будет исполняться сценарий Modernizr. В считанные миллисекунды сценарий тестирует поддержку пары десятков новых возможностей, а потом создает объект JavaScript, называющийся, опять же, Modernizr и содержащий результаты тестирования. Чтобы проверить поддержку браузером определенной возможности, тестируются свойства этого объекта.</p>
          </li>
          <li>Напишите сценарий, который тестирует требуемую возможность, а потом выполняет соответствющее действие. Пример возможного сценария для поверки, поддерживается ли HTML5-возможность drag and drop, и вывода результатов в окне браузера показан в следующем листинге:
            <i>
                &lt;!DOCTYPE html&gt;<br>
                &lt;html lang="en"&gt;<br>
                &lt;head&gt;<br>
                &lt;meta charset="utf-8"&gt;<br>
                &lt;title&gt;HTML_5 Feature Detectiom&lt;/title&gt;<br>
                &lt;script src="modernizr-2.0.6.js"&gt;&lt;/script&gt;<br>
                &lt;/head&gt;<br>
                <br>
                &lt;body&gt;<br>
                &lt;p&gt;The verdict is... &lt;span id="result"&gt;&lt;/span&gt;&lt;/p&gt;<br>
                &lt;script&gt;<br>
                 //Найти элемет на странице (называющейся result), в котором<br>
                 // можно вывести результаты.<br>
                 var reault = document.getElementById("result");<br>
                 if (Modernizr.draganddrop) {<br>
                    result.innerHTML = "Rejoice! Your browser supports" + "drag-and-drop.".<br>
                 }<br>
                 else {<br>
                    result.innerHTML = "Your feeble browser dosn't " + "support drag-and-drop.";<br>
                 }<br>
                 &lt;/script&gt;<br>
                 &lt;/body&gt;<br>
                 &lt;/html&gt;
            </i>
          </li>
        </ol>
        <p>Хотя в этом примере показан правильный способ проверки поддержки возможности, применяемый в нем подход к обработке неподдерживаемой возможности не идеален. Вместо того чтобы просто проинформировать (пусть даже и самым вежливым образом) посетителя вашего веб-сайта о том, что его браузер не поддерживает определенную функциональность вашего сайта, намного лучше будет реализовать какое-либо обходное решение, даже если это решение и не будет таким изящным или обладать всеми способностями заменяемой возможности HTML5. Например, елси неподдерживаемая возможность - всего лишь какая-то несущественная примочка, которая бесполезна для посетителя сайта, то эту проблему можно вообще игнорировать.</p>
        <h3>Замена отсутсвующих возможностей заполнителями</h3>
        <p>Инструмент Modernizr позволяет разработчику обнаружить дыры в поддержке возможностей браузером, информируя его о неработающей функциональности. Но он ничего не делает для решения этих проблем. И здесь на вырочку приходят заполнители (polyfills, полифилы). По сути, заполнители - это разношерстный набор методов для заполнения дыр в поддержке старым браузерами стандарта HTML5. Английское слово polyfill происходит от продукта polyfiller, который представляет собой смесь для заделки дыр в гипсокартоне пред покраской, т.е. попросту вид шпаклевки. В HTML5 идеальным заполнителем будет такой, который можно вставить в страницу без излишних усилий. Такой заполнитель предоставляет обратную совместимость без прерываний в работе страницы и не влияет на остальной код страницы, что позволяет разработчику работать с чистым HTML5, в то время как кто-то другой беспокоится об обходных решениях.</p>
        <p>Но заполнители - не совсем идеальное решение. Некоторые из них полагаются на другие технологии, для которых может предоставляться только частичная поддержка. Например, один из полифилов позволяет эмулировать элемент HTML5 &lt;canvas&gt; на старых версиях Internet Explorer с помощью подключаемого модуля Silverlight. Это хорошо, елси на браузере посетителя вашей веб-страницы установить его, то вам нужно прбегнуть к какому-либо другому решению. Другие заполнители могут быть менее работоспособными, чем настоящая возможность HTML5, или менее производительными.</p>
        <p>В этой книге дается информация о некоторых возможных заполнителях. Более подробную информацию можно найти самое что ни на есть близкое к всеохватывающему катологу полифилов HTML5 на веб-сайте GitHub (https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills). Но имейте в виду - диапазон качества, производительности и поддержки заполнителей очень большой.</p>
    </body>
</html>